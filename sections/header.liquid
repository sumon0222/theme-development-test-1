<section class="header">
  <div class="header-container">
    <!-- Sale Banner -->
    <div class="header-top-wrapper">
      <div class="header-top-left">
        <div class="header-top-text">{{ section.settings.sale_banner_text }}</div>
        <a href="{{ section.settings.shop_now_link }}" class="header-top-left-link">{{ section.settings.shop_now_text }}</a>
      </div>
    </div>

    <!-- Main Navigation -->
    <div class="header-nav">
      <div class="header-nav-wrapper">
        <div class="header-nav-left">
          <!-- Hamburger Icon -->
          {% if section.settings.hamburger_icon %}
            <img 
              height="auto"
              width="auto"
              src="{{ section.settings.hamburger_icon | image_url: '100x' }}" 
              alt="Hamburger Menu"
              class="hamburger-icon"
            >
          {% else %}
            <img 
              height="auto"
              width="auto"
              src="{{ 'hamburger.png' | asset_url }}" 
              alt="Default Hamburger Menu"
              class="hamburger-icon"
            >
          {% endif %}

          <!-- Logo -->
          <a href="{{ routes.root_url }}" class="header-link-logo w-inline-block">
            <div class="header-logo-text">{{ section.settings.logo_text }}</div>
          </a>

          <!-- Menu Links -->
          <div class="header-menu">
            {% if section.settings.menu.links.size > 0 %}
              {% for link in section.settings.menu.links %}
                <a href="{{ link.url }}" class="menu-list">{{ link.title }}</a>
              {% endfor %}
            {% else %}
              <a href="#" class="menu-list">Home</a>
              <a href="#" class="menu-list">Shop</a>
              <a href="#" class="menu-list">Sign Up</a>
              <a href="#" class="menu-list">Contact</a>
            {% endif %}
          </div>
        </div>

        <!-- Search and Icons -->
        <div class="header-nav-right">
          <div class="search-form-block w-form">
            <form action="{{ routes.search_url }}" method="get" class="form">
              <input
                class="text-field-2 w-input"
                type="text"
                name="q"
                placeholder="{{ section.settings.search_placeholder }}"
                aria-label="Search"
              >
            </form>
          </div>

          <div class="wishlist-cart-icon">
            <!-- Wishlist Icon with Count -->
            <div class="wishlist-container">
              <a href="{{ section.settings.wishlist_url }}" class="wishlist-icon-wrapper">
                {% if section.settings.wishlist_icon %}
                  <img 
                    height="auto"
                    width="auto"
                    src="{{ section.settings.wishlist_icon | image_url: '50x' }}" 
                    alt="Wishlist"
                    class="wishlist-icon"
                  >
                {% else %}
                  <img 
                    height="auto"
                    width="auto"
                    src="{{ 'wishlist.png' | asset_url }}" 
                    alt="Default Wishlist"
                    class="wishlist-icon"
                  >
                {% endif %}
                <span class="wishlist-count" id="wishlist-count">0</span>
              </a>
            </div>

            <!-- Cart Icon with Count -->
            <div class="cart-container">
              <a href="{{ section.settings.cart_url }}" class="cart-icon-wrapper">
                {% if section.settings.cart_icon %}
                  <img 
                    height="auto"
                    width="auto"
                    src="{{ section.settings.cart_icon | image_url: '50x' }}" 
                    alt="Cart"
                    class="cart-icon"
                  >
                {% else %}
                  <img 
                    height="auto"
                    width="auto"
                    src="{{ 'Cart.png' | asset_url }}" 
                    alt="Default Cart"
                    class="cart-icon"
                  >
                {% endif %}
                <span class="cart-count" id="cart-count">0</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile Popup Menu -->
    <div class="header-popup-container">
      <div class="head-popup-wrapper">
        {% if section.settings.close_icon %}
          <img 
            height="auto"
            width="auto"
            src="{{ section.settings.close_icon | image_url: '50x' }}" 
            alt="Close Menu"
            class="image-3"
          >
        {% else %}
          <img 
            height="auto"
            width="auto"
            src="{{ 'close.png' | asset_url }}" 
            alt="Default Close Menu"
            class="image-3"
          >
        {% endif %}

        <div class="header-popup-items">
          <a href="{{ routes.root_url }}" class="header-link-logo w-inline-block">
            <div class="header-popup-logo header-logo-text">{{ section.settings.logo_text }}</div>
          </a>

          <div class="search-form-block form-mobile-search w-form">
            <form action="{{ routes.search_url }}" method="get" class="form">
              <input
                class="text-field-2 form-mobile-text-field w-input"
                type="text"
                name="q"
                placeholder="{{ section.settings.search_placeholder }}"
                aria-label="Search"
              >
            </form>
          </div>

          <div class="header-popup-nav">
            {% if section.settings.menu.links.size > 0 %}
              {% for link in section.settings.menu.links %}
                <a href="{{ link.url }}" class="menu-list head-popup-menu-lists">{{ link.title }}</a>
              {% endfor %}
            {% else %}
              <a href="#" class="menu-list head-popup-menu-lists">Home</a>
              <a href="#" class="menu-list head-popup-menu-lists">Shop</a>
              <a href="#" class="menu-list head-popup-menu-lists">Sign Up</a>
              <a href="#" class="menu-list head-popup-menu-lists">Contact Us</a>
            {% endif %}
          </div>

          <a href="{{ section.settings.shop_now_link }}" class="best-selling-view-all-btn view-all-products-btn w-button">
            {{ section.settings.shop_now_text }}
          </a>

          <h3 class="categories-popup">{{ section.settings.categories_title }}</h3>
          
          {% if section.settings.categories_menu.links.size > 0 %}
            {% for link in section.settings.categories_menu.links %}
              <a href="{{ link.url }}" class="sidebar-nav-list pop-nav-lists">{{ link.title }}</a>
            {% endfor %}
          {% else %}
            <a href="#" class="sidebar-nav-list pop-nav-lists">Category 1</a>
            <a href="#" class="sidebar-nav-list pop-nav-lists">Category 2</a>
            <a href="#" class="sidebar-nav-list pop-nav-lists">Category 2</a>
            <a href="#" class="sidebar-nav-list pop-nav-lists">Category 2</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Update Cart Count
    fetch('/cart.js')
      .then(response => response.json())
      .then(data => {
        document.getElementById('cart-count').textContent = data.item_count;
      });

    // Update Wishlist Count (assuming wishlist is stored in cart attributes)
    fetch('/cart.js')
      .then(response => response.json())
      .then(data => {
        let wishlistCount = data.attributes.wishlist ? data.attributes.wishlist.split(',').length : 0;
        document.getElementById('wishlist-count').textContent = wishlistCount;
      });

    // Show Cart & Wishlist Items on Hover
    const wishlistContainer = document.querySelector('.wishlist-container');
    const cartContainer = document.querySelector('.cart-container');

    // Hover event for Wishlist
    wishlistContainer.addEventListener('mouseenter', function() {
      // Display wishlist items (Replace with actual wishlist data from cart attributes)
      alert('Wishlist items will be displayed here.');
    });

    // Hover event for Cart
    cartContainer.addEventListener('mouseenter', function() {
      // Display cart items (Replace with actual cart data)
      alert('Cart items will be displayed here.');
    });
  });
</script>
